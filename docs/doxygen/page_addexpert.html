<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HPhi++: Add new input-file for Expert mode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HPhi++
   &#160;<span id="projectnumber">3.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_addexpert.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Add new input-file for Expert mode </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When you add a new input file to <em>namelist file</em>, the following procedures must be needed. In the following, we add the keyword "Test" as an example.</p>
<ol type="1">
<li>Add a new keyword to the end of <code>cKWListOfFileNameList</code> in <code><a class="el" href="readdef_8cpp.html" title="File to define functions of reading input files. ">readdef.cpp</a></code>. <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="readdef_8cpp.html#a97b626327a0973224a8744d36b254429">cKWListOfFileNameList</a>[][D_CharTmpReadDef]</div><div class="line">={</div><div class="line">  <span class="stringliteral">&quot;CalcMod&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;ModPara&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;LocSpin&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;Trans&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;CoulombIntra&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;CoulombInter&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;Hund&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;PairHop&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;Exchange&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;InterAll&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;OneBodyG&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;TwoBodyG&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;PairLift&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;Ising&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;Boost&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;SingleExcitation&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;PairExcitation&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;SpectrumVec&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;Laser&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;TEOneBody&quot;</span>,</div><div class="line">  <span class="stringliteral">&quot;TETwoBody&quot;</span></div><div class="line">  <span class="stringliteral">&quot;Test&quot;</span></div><div class="line">}</div></div><!-- fragment --> Here, <code>D_CharTmpReadDef</code> is set as <code>200</code> in readdef.h. If the the character number of added keyword exceeds <code>200</code>, please change the value.</li>
<li>Define the index of keyword (such as KWCalcMod, KWModPara...) in <code>readdef.h</code>. <div class="fragment"><div class="line"><span class="preprocessor">#define KWCalcMod 0</span></div><div class="line"><span class="preprocessor">#define KWModPara 1</span></div><div class="line"><span class="preprocessor">#define KWLocSpin 2</span></div><div class="line"><span class="preprocessor">#define KWTrans 3</span></div><div class="line"><span class="preprocessor">#define KWCoulombIntra 4</span></div><div class="line"><span class="preprocessor">#define KWCoulombInter 5</span></div><div class="line"><span class="preprocessor">#define KWHund 6</span></div><div class="line"><span class="preprocessor">#define KWPairHop 7</span></div><div class="line"><span class="preprocessor">#define KWExchange 8</span></div><div class="line"><span class="preprocessor">#define KWInterAll 9</span></div><div class="line"><span class="preprocessor">#define KWOneBodyG 10</span></div><div class="line"><span class="preprocessor">#define KWTwoBodyG 11</span></div><div class="line"><span class="preprocessor">#define KWPairLift 12</span></div><div class="line"><span class="preprocessor">#define KWIsing 13</span></div><div class="line"><span class="preprocessor">#define KWBoost 14</span></div><div class="line"><span class="preprocessor">#define KWSingleExcitation 15</span></div><div class="line"><span class="preprocessor">#define KWPairExcitation 16</span></div><div class="line"><span class="preprocessor">#define KWSpectrumVec 17</span></div><div class="line"><span class="preprocessor">#define KWLaser 18</span></div><div class="line"><span class="preprocessor">#define KWTEOneBody 19</span></div><div class="line"><span class="preprocessor">#define KWTETwoBody 20</span></div><div class="line"><span class="preprocessor">#define KWTest 21</span></div></div><!-- fragment --> The defined value must be same as the index of cKWListOfFileNameList to get the name of keyword, i.e. cKWListOfFileNameList[KWTest] = "Test".</li>
<li>Add procedure of reading the file in <code>ReadDefFileNInt</code> function in <code><a class="el" href="readdef_8cpp.html" title="File to define functions of reading input files. ">readdef.cpp</a></code>. <div class="fragment"><div class="line"><span class="keywordflow">for</span>(iKWidx=0; iKWidx&lt; <a class="code" href="readdef_8cpp.html#aa1a4cb0fc2864b92690212e05951baa8">D_iKWNumDef</a>; iKWidx++) {</div><div class="line">   strcpy(defname, <a class="code" href="readdef_8cpp.html#adec897fba265edf611b008c12519339b">cFileNameListFile</a>[iKWidx]);</div><div class="line"></div><div class="line">   <span class="keywordflow">if</span> (strcmp(defname, <span class="stringliteral">&quot;&quot;</span>) == 0) <span class="keywordflow">continue</span>;</div><div class="line">   <span class="keywordflow">if</span>(iKWidx==KWSpectrumVec){</div><div class="line">     <span class="keywordflow">continue</span>;</div><div class="line">   }</div><div class="line">   fprintf(<a class="code" href="global_8cpp.html#abacbc82cf67663cd6f3708f1274ac207">stdoutMPI</a>, <span class="stringliteral">&quot;  Read File %s for %s.\n&quot;</span>, defname, cKWListOfFileNameList[iKWidx]);</div><div class="line">   fp = <a class="code" href="wrapper_m_p_i_8cpp.html#a405f88de519282b8e7605988745f42ae">fopenMPI</a>(defname, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line">   <span class="keywordflow">if</span> (fp == NULL) <span class="keywordflow">return</span> <a class="code" href="readdef_8cpp.html#a21479192d729f0d76654f014b63b6d7a">ReadDefFileError</a>(defname);</div><div class="line">   <span class="keywordflow">switch</span> (iKWidx) {</div><div class="line">   <span class="keywordflow">case</span> KWTest:</div><div class="line">       <a class="code" href="wrapper_m_p_i_8cpp.html#aa75a96d74dddc8e6921813225e318551">fgetsMPI</a>(...); <span class="comment">//Add the procedure to read-line here.</span></div><div class="line">   }</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="readdef_8cpp.html#a17c76a94fb506b26d2c69919ff9d5cd1" title="Function of reading information about &quot;ModPara&quot; file and total number of parameters from other def fi...">ReadDefFileNInt</a></dd></dl>
</li>
<li>Use <code>InitializeInteractionNum</code> function to initialize variables. <div class="fragment"><div class="line"> <span class="keywordtype">void</span> <a class="code" href="readdef_8cpp.html#a1422ba60c3e8b188b44a30ed63e4ce68">InitializeInteractionNum</a></div><div class="line">(</div><div class="line"> <span class="keyword">struct</span> <a class="code" href="struct_define_list.html">DefineList</a> *X</div><div class="line"> )</div><div class="line">{</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a86d876e3460bfb0d61eab8ebfa6a1bbb">NTransfer</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a507324edb1388b6f4641db4e6b307540">NCoulombIntra</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a08b89170cfe882b8ef7ef6064e353067">NCoulombInter</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a77086bc74727499b7bcc9116a774cd4f">NIsingCoupling</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a8f3cd1249eca9bfca289d96a4fce40a4">NPairLiftCoupling</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a3c458df5394f9b48e61f9b43f3159750">NInterAll</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#af70f4d9849c5f47edba0a0c989d18f1c">NCisAjt</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a910451f7ffb4effad9386378ffd175d0">NCisAjtCkuAlvDC</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a4a0d29917a41b9600647b7e0f25df8c1">NSingleExcitationOperator</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#aa8a4b8196e17884069bc068c984e114d">NPairExcitationOperator</a>=0;</div><div class="line">  <span class="comment">//[s] Time Evolution</span></div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a4c23cf61d5d2fb806eb18fe0825baa46">NTETimeSteps</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a479711a0ccf52c742406ee0f37588afc">NLaser</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#a3ba8945083b796d8b8da8f7b9c087395">NTEInterAll</a>=0;</div><div class="line">  X-&gt;<a class="code" href="struct_define_list.html#aab42fdc24802b4e67ff62cb108aea7a2">NTETransfer</a>=0;</div><div class="line">  <span class="comment">//[e] Time Evolution</span></div><div class="line">  X-&gt;NTest = 0;</div><div class="line">}</div></div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="readdef_8cpp.html#a1422ba60c3e8b188b44a30ed63e4ce68" title="function of initializing interactions ">InitializeInteractionNum</a></dd></dl>
</li>
<li>The memories of arrays are stored by setmem_def function in <code><a class="el" href="xsetmem_8cpp.html" title="Set size of memories to be needed for calculation. ">xsetmem.cpp</a></code>. <dl class="section see"><dt>See also</dt><dd><a class="el" href="xsetmem_8cpp.html#ac651829049ab94b6f827081bbca80b67" title="Set size of memories for Def and Phys in BindStruct. ">setmem_def</a> </dd></dl>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon May 6 2019 23:22:24 for HPhi++ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
